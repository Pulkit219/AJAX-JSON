<!DOCTYPE html>
<html>
<head>

<style type="text/css">
	
	img
	{
		    width: 100px;
    border-radius: 15%;
	}

	div.row
	{
		padding-top: 2%;
	}
</style>


<meta charset="UTF-8">
 
<!-- If IE use the latest rendering engine -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
 
<!-- Set the page to the width of the device and set the zoon level -->
<meta name="viewport" content="width = device-width, initial-scale = 1">
	<title>Twitch TV</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="shortcut icon" type="image/png" href="https://drive.google.com/uc?id=0B5-CQuN8g8r_UjY3dkxYVERNYXc">

</head>
<body>

<div class="container">
	<div id="header" class="text-center">
		<h1>Twitch TV</h1><br>
		<h3>FreeCodeCamp</h3>
		<a  target="_blank" href="https://www.twitch.tv/freecodecamp">
			<h4 id="fccStatus"></h4>
		</a>
		
		<div class="row">
		   <div class="col-md-4" >Logo</div>
		   <div class="col-md-4" >Channel</div>	
		   <div class="col-md-4" >Status</div>		
		</div>

		<div id="followerInfo">
			
		</div>

	</div>

</div>





<script src="https://code.jquery.com/jquery-3.2.1.js"
 integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
			  crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script type="text/javascript">
	
	$(document).ready(function() {

		var url = 'https://api.twitch.tv/kraken/streams/freecodecamp'
		var url2 = 'https://api.twitch.tv/kraken/users/freecodecamp/follows/channels/'

		var followersArray=[];

	  $.ajax({
		        type: 'GET',
		        url:url,
		        async:false,
		        dataType:'JSON',
		        headers:{
		        	'Client-ID':'5gtdkn7ub0h09hnq7nms8nno15fuas'
		        	// 'Accept': 'application/vnd.twitchtv.v5+json' 
		        },
		        success:function(data){
		        	console.log(data);

		        	if(data.stream===null)

		        	{
		        		$('#fccStatus').html('Free code camp is offline!');
		        	}
		        	else
		        	{
		        		$('#fccStatus').html('Free code camp is online!');
		        	}
		        	

		        	
		        
		        },
		        error:function(){
		          alert("REQUEST failed");
		        }



      }) //end of ajax for FCC status

      $.ajax({
		        type: 'GET',
		        url:url2,
		        async:false,
		        dataType:'JSON',
		        headers:{
		        	'Client-ID':'5gtdkn7ub0h09hnq7nms8nno15fuas'
		        	// 'Accept': 'application/vnd.twitchtv.v5+json' 
		        },
		        success:function(data){
		        	// console.log(data);
		        	for (var i =0; i < data.follows.length; i++) {
		        		
		        		followersArray.push(data.follows[i].channel.display_name);
		        	}
		        	followersArray.push('quakechampions','brunofin','ESL_SC2');
		        	console.log(followersArray);
		        	for (var i =0; i < followersArray.length; i++) {
		        		
		        		let url = "https://api.twitch.tv/kraken/streams/"+followersArray[i];
		        		// console.log(url);

		        		$.ajax({
						        type: 'GET',
						        url:url,
						        async:false,
						        dataType:'JSON',
						        headers:{
						        	'Client-ID':'5gtdkn7ub0h09hnq7nms8nno15fuas'
						        	// 'Accept': 'application/vnd.twitchtv.v5+json' 
						        },
						        success:function(data3){
						        	if(data3.stream)
						        	{
						        		$('#followerInfo').prepend("<div class='row'><div class='col-md-4'><img src='"+data3.stream.channel.logo+"'></div><div class='col-md-4' >"+data3.stream.channel.display_name+"</div><div class='col-md-4' ><a target='_blank' href='https://www.twitch.tv/"+followersArray[i]+"'>"+data3.stream.channel.status+"</a></div></div>")

						        	}
						        	else
						        	{
						        		$('#followerInfo').prepend("<div class='row'><div class='col-md-4'><img src='http://www.journeybuds.com/contents/Images/NoImage.jpg'></div><div class='col-md-4' >"+followersArray[i]+"</div><div class='col-md-4' ><img src='http://vignette3.wikia.nocookie.net/canadians-vs-vampires/images/a/a4/Not_available_icon.jpg/revision/latest?cb=20130403054528'></div></div>")
						        	}
						        
						        },
						        error:function(){
						          alert("REQUEST failed");
						        }
						    })
		        	}

		        },
		        error:function(){
		          alert("REQUEST failed");
		        }



      }) //end of ajax for FCC follow channels 



	});
</script>
</body>
</html>